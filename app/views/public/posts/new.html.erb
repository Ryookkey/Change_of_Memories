<h1>事実メモ</h1>

<%= form_with model: @post, url: public_posts_path, local: true, id: "postForm" do |form| %>
  <h4>内容</h4>
  <%= form.text_area :first_memo %>

  <!-- 新規投稿ボタン -->
  <%= form.submit '新規投稿', class: 'btn btn-secondary' %>

  <!-- 次に進むボタン（hidden_fieldでフラグを送信） -->
  <%= hidden_field_tag :next_step, false, id: "nextStepField" %>
  <%= button_tag '次に進む (second memo)', type: 'button', class: 'btn btn-primary', id: "nextStepButton" %>
<% end %>

<% if @post.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
    <ul>
      <% @post.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- JavaScriptで次に進むボタンを押した際にフラグを変更 -->
<script>
  document.getElementById("nextStepButton").addEventListener("click", function() {
    document.getElementById("nextStepField").value = true;
    document.getElementById("postForm").submit();
  });
</script>
